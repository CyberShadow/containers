<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<link rel="stylesheet" type="text/css" href="../style.css"/><script src="../highlight.pack.js"></script>
<title>HeapBlock</title>
<base href="../"/>
<script src="search.js"></script>
</head>
<body><div class="breadcrumbs">
<table id="results"></table>
<input type="search" id="search" placeholder="Search" onkeyup="searchSubmit(this.value, event)"/>
std.<a href="std/allocator.html">allocator</a>.HeapBlock</div>
<pre><code>struct HeapBlock(Allocator, size_t theBlockSize, size_t theAlignment = platformAlignment)</code></pre>
<div class="section">
 implements a simple heap consisting of one contiguous area
of memory organized in blocks, each of size . A block is a unit
of allocation. A bitmap serves as bookkeeping data, more precisely one bit per
block indicating whether that block is currently allocated or not.
</div>
<div class="section">
There are advantages to storing bookkeeping data separated from the payload
(as opposed to e.g. ). The layout is more compact, searching
for a free block during allocation enjoys better cache locality, and
deallocation does not touch memory around the payload being deallocated (which
is often cold).

Allocation requests are handled on a first-fit basis. Although linear in
complexity, allocation is in practice fast because of the compact bookkeeping
representation, use of simple and fast bitwise routines, and memoization of the
first available block position. A known issue with this general approach is
fragmentation, partially mitigated by coalescing. Since  does
not maintain the allocated size, freeing memory implicitly coalesces free blocks
together. Also, tuning  has a considerable impact on both internal
and external fragmentation.

The size of each block can be selected either during compilation or at run
time. Statically-known block sizes are frequent in practice and yield slightly
better performance. To choose a block size statically, pass it as the  parameter as in . To choose a block
size parameter, use  and pass the
block size to the constructor.


</div>
<div class="section">
<h3>TODO</h3>
 implement  and .

</div>
<div class="section">
<h3>Aliases</h3>
<table>
<tr><td><a href="std/allocator.HeapBlock.alignment.html">alignment</a></td><td><pre><code>theAlignment</code></pre></td><td>The alignment offered is user-configurable statically through parameter
   , defaulted to .</td></tr></table>
<h3>Functions</h3>
<table>
<tr><td><a href="std/allocator.HeapBlock.allocate51434.html">allocate</a></td><td></td><td>Standard allocator methods per the semantics defined above. The  and  methods are  because they may
   move memory around, leaving dangling pointers in user code.</td></tr><tr><td><a href="std/allocator.HeapBlock.owns52985.html">owns</a></td><td></td><td>Standard allocator methods per the semantics defined above. The  and  methods are  because they may
   move memory around, leaving dangling pointers in user code.</td></tr><tr><td><a href="std/allocator.HeapBlock.expand58085.html">expand</a></td><td></td><td>Standard allocator methods per the semantics defined above. The  and  methods are  because they may
   move memory around, leaving dangling pointers in user code.</td></tr><tr><td><a href="std/allocator.HeapBlock.reallocate59474.html">reallocate</a></td><td></td><td>Standard allocator methods per the semantics defined above. The  and  methods are  because they may
   move memory around, leaving dangling pointers in user code.</td></tr><tr><td><a href="std/allocator.HeapBlock.deallocate60199.html">deallocate</a></td><td></td><td>Standard allocator methods per the semantics defined above. The  and  methods are  because they may
   move memory around, leaving dangling pointers in user code.</td></tr><tr><td><a href="std/allocator.HeapBlock.deallocateAll61495.html">deallocateAll</a></td><td></td><td>Standard allocator methods per the semantics defined above. The  and  methods are  because they may
   move memory around, leaving dangling pointers in user code.</td></tr></table>
</div>

<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
